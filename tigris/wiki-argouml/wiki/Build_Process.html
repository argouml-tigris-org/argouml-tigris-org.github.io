---
layout: oldtigrissite
---
<h1><small>From the ArgoUML wiki at argouml.tigris.org.</small><br />         Wiki: Build Process
    </h1>
</div>
 
 
 
        
                 
                 
           
    
  

 
 





<div class="wiki">




<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line874">Note: This needs to be updated with the Eclipse-orientation. <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line874">When building from the command line, the build process is driven by Apache Ant using the ant distribution provided in the tools directory. <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line874">Ant is a tool written in Java developed for Apache that reads an XML-file with rules telling what to compile to what result and what files to include in what jar-file. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line862">The rule file is named <strong>build.xml</strong>, and there is one in each mini-project directory: (<strong>argouml/src/argouml-app</strong>, <strong>argouml/src/argouml-core-infra</strong>, <strong>argouml/src/argouml-core-model</strong>, ...). <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line867">
<h3 id="head-774f096661799ca5c7efd8c10be6d8f27b50c1a7">How Ant is run from the ArgoUML development environment</h3>
<span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line862">For your convenience the ant tool is present in the source repository of ArgoUML in the file <strong>argouml/tools/apache-ant-<em>X.X.X</em></strong> directory. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line862">It is possible to start ant with the command <tt>tools/apache-ant-X.X.X/bin/ant&nbsp;arg</tt>, <tt>../../tools/apache-ant-X.X.X/bin/ant&nbsp;arg</tt>, or <tt>../argouml/tools/apache-ant-X.X.X/bin/ant&nbsp;arg</tt>, depending on if you work from the <strong>argouml</strong> directory, the <strong>argouml/src/argouml-build</strong> directory, or a module in a subproject such as <strong>argouml-cpp</strong> directory respectively. <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line874">On windows the script to run is the ant.bat. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line862">To keep you from having to write this and keeping track if you are working with a module or not there are two scripts (one for Unix and one for Windows) that are called <strong>build.sh</strong> and <strong>build.bat</strong> respectively present in most of the directories that contain a <strong>build.xml</strong> file. These two scripts run the equivalence of the above paths. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line862">Note: Some of the <strong>build.<em>&lt;sh|bat&gt;</em></strong> files have been removed in the repository restructuring, (issue #4625). <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line874">By setting JAVA_HOME to different values you can at different times build with different versions of JDK and Java. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line862">To use another version of Ant than the one provided in the repository you must execute <tt>/where/ever/you/placed/your/new/ant&nbsp;target</tt> rather than <tt>build&nbsp;target</tt>. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line867">
<h4 id="head-56c7c3aa23ae08099fdcd4388e86bef237047657">Compiling for Unix and Mac OS X</h4>
<span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line862">Here is what you need to do in order to compile and run your checked out copy of ArgoUML under Unix or Mac OS X. If building on Mac OS X make sure you have the current Developer Tools from Apple (see <a class="http" href="http://developer.apple.com/mac/">ADC/Mac</a> for details) installed. <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><ol type="1"><li><span class="anchor" id="line-32"></span><pre>JAVA_HOME=/where/you/have/installed/jdk
<span class="anchor" id="line-33"></span>
<span class="anchor" id="line-34"></span>export JAVA_HOME
<span class="anchor" id="line-35"></span></pre><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><p class="line862">This is for sh-style shells like sh, ksh, zsh and bash. If you use csh-style shells like csh and tcsh you will instead have to write <tt>setenv&nbsp;JAVA_HOME&nbsp;/where/you/have/installed/jdk</tt>. <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span></li><li class="gap"><p class="line862">Change the current directory to the directory you are building <span class="anchor" id="line-40"></span><pre>cd /your/checked/out/copy/of/argouml/src
<span class="anchor" id="line-41"></span></pre><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span></li><li class="gap"><p class="line862">Start Ant with no parameters to get a list of build targets with descriptions <span class="anchor" id="line-44"></span><pre>./build.sh
<span class="anchor" id="line-45"></span></pre><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></li><li class="gap"><p class="line862">Run ArgoUML using <span class="anchor" id="line-48"></span><pre>./build.sh run 
<span class="anchor" id="line-49"></span></pre><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span>If you change something, running the run target again will build and run. <span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span></li></ol><p class="line874">In certain cases when something is changed in the argouml project you need to use the "clean" target to re-compile everything, since we have not set up dependencies correctly. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line867">
<h4 id="head-d24706fd289a8984da45e7b596e148ae2ae6da6a">Compiling for Windows</h4>
<span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><p class="line874">If you do this from Cygwin you work just like for Unix. <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><ol type="1"><li><span class="anchor" id="line-62"></span><pre>set JAVA_HOME=\where\you\have\installed\jdk
<span class="anchor" id="line-63"></span></pre><span class="anchor" id="line-64"></span></li><li><p class="line862">Change the current directory to the directory you are building <span class="anchor" id="line-65"></span><pre>cd \your\checked\out\copy\of\argouml\src\argouml-build
<span class="anchor" id="line-66"></span></pre><span class="anchor" id="line-67"></span></li><li><p class="line862">Start Ant with "-p" parameter to get a list of build targets with descriptions <span class="anchor" id="line-68"></span><pre>build -p
<span class="anchor" id="line-69"></span></pre><span class="anchor" id="line-70"></span></li><li>Run ArgoUML using build run <span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span></li></ol><p class="line867">
<h4 id="head-0486700b4d2114fabe2212416fac6c3def317600">Customizing and configuring your build</h4>
<span class="anchor" id="line-73"></span><p class="line862">If you want to customize your build, change the appropriate <strong>build.xml</strong> or <strong>default.properties</strong> file. <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><p class="line874">Don't commit these changes unless you are working with updating the development environment itself. <span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><p class="line874">Remember that if you do this, you have modified your development environment. To be sure that you will not break anything for anyone else when checking in things developed using this modified environment, remove these files temporarily for the compiling and testing you do just before you commit just as you would do before other commits. <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><p class="line867">
<h3 id="head-c7159bcd140b7ec06fb0c628d83ddeb8722679b7">Building the core ArgoUML</h3>
<span class="anchor" id="line-80"></span><p class="line862">If you work with ant you will want to check out and build the entire project. You do this with the <tt>install</tt> target. <span class="anchor" id="line-81"></span><ol type="1"><li><p class="line862">Change the current directory to the directory you are building <span class="anchor" id="line-82"></span><pre>cd /your/checked/out/copy/of/argouml/src
<span class="anchor" id="line-83"></span></pre><span class="anchor" id="line-84"></span></li><li><p class="line862">Start Ant with no parameters to get a list of build targets with descriptions <span class="anchor" id="line-85"></span><pre>./build.sh install
<span class="anchor" id="line-86"></span></pre><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span></li></ol><p class="line862">This will build all of the core of ArgoUML and copy it to the <strong>build</strong> directory where sub-projects expect to find it. <span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><p class="line867">
<h3 id="head-4feac49bb7dc00781c3c918ab464037dc0843703">Building one of the sub-projects</h3>
<span class="anchor" id="line-91"></span><p class="line862">If you want to run ArgoUML with modules enabled the <strong>build.xml</strong>s are set up to do this in two ways: <span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><ol type="1"><li>Test just one sub-project <span class="anchor" id="line-94"></span><ol type="1"><li>Build the core ArgoUML (See above) <span class="anchor" id="line-95"></span></li><li>Run the module <span class="anchor" id="line-96"></span><p class="line862">This is done with <tt>run</tt> ant-target in the directory of the sub-project in question.  <span class="anchor" id="line-97"></span></li></ol></li><li>Test several sub-projects together <span class="anchor" id="line-98"></span><ol type="1"><li>Build the core ArgoUML (See above) <span class="anchor" id="line-99"></span></li><li>Compile and install the sub-projects <span class="anchor" id="line-100"></span><p class="line862">This is done with <tt>install</tt> ant-target in each of the sub-projects' directory. <span class="anchor" id="line-101"></span>The <tt>install</tt> ant-target copies the jar or jars of the module to the <strong>argouml/build/ext</strong> directory. <span class="anchor" id="line-102"></span></li><li>Start ArgoUML <span class="anchor" id="line-103"></span><p class="line862">This is done with <tt>run</tt> ant-target in the argouml directory.  <span class="anchor" id="line-104"></span>This will start ArgoUML with all the modules "installed".  <span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span></li></ol></li></ol><p class="line867">
<h3 id="head-5a0bb598d7d59721ce46f24a65f10e10f7eaf4df">Developing in a sub-project without compiling the ArgoUML core yourself</h3>
<span class="anchor" id="line-107"></span><ol type="1"><li><p class="line862">Download and unpack the latest release of ArgoUML and located it in the <strong>argouml\build</strong> directory. <span class="anchor" id="line-108"></span><pre>C:\Work&gt;mkdir argouml
<span class="anchor" id="line-109"></span>C:\Work&gt;jar xf ArgoUML-0.34.zip
<span class="anchor" id="line-110"></span>C:\Work&gt;move argouml-0.34 argouml\build
<span class="anchor" id="line-111"></span></pre><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></li><li class="gap"><p class="line862">Check out your subproject. <span class="anchor" id="line-114"></span><pre>C:\Work&gt;svn checkout http://argouml-XX.tigris.org/svn/argouml-XX/trunk argouml-XX
<span class="anchor" id="line-115"></span>C:\Work&gt;set JAVA_HOME=C:\Programs\jdkwhatever
<span class="anchor" id="line-116"></span>C:\Work&gt;cd argouml-XX
<span class="anchor" id="line-117"></span>C:\Work\argouml-XX&gt;ant run
<span class="anchor" id="line-118"></span></pre><span class="anchor" id="line-119"></span></li></ol><p class="line874">An ArgoUML starts with the module from the subproject argouml-XX enabled. <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><p class="line867">
<h3 id="head-6e89e53162d705f3efeac023843eaa30c7c573a0">The sub-project's relation to ArgoUML</h3>
<span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><p class="line874">The purpose of a sub-project to ArgoUML is to develop things that are run within ArgoUML. In ArgoUML we call them modules, in other tools they are called add-ins or plug-ins. <span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><p class="line874">If you want to start working with a module of your own you could do it by letting the ArgoUML project leader set up a subproject to ArgoUML for you. The benefits are: <span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><ul><li>You will inherit all the infrastructure from the ArgoUML project. <span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span>This includes a site for your Subversion repository, mailing lists, web server..., a common way to set up the project, releases, bug fixes, static checks, and coding guidelines and license. <span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span></li><li class="gap">You get a community of ArgoUML developers that might monitor your work and fix problems, especially problems caused by changes that the developer makes to the ArgoUML API.  <span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span></li></ul><p class="line874">The draw-backs are: <span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><ul><li>You are forced to use the ArgoUML infrastructure <span class="anchor" id="line-136"></span>Subversion, license, coding guidelines. <span class="anchor" id="line-137"></span></li><li>You are forced to make your module Open Source. <span class="anchor" id="line-138"></span>This is actually a Tigris policy.  <span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span></li></ul><p class="line874">If you decide not to make your module a argouml subproject, you can still benefit from using a similar set up as described here but since you have your module repository elsewhere, some adaptations are necessary. <span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><p class="line874">The sub-projects are developed close to the ArgoUML project and reside in a similarly-looking subversion repository. We try to provide a working set of tools and instructions to fit the whole set of projects. These tools are sometimes located in the argouml project and sometimes in the subproject. Also, to compile the module, you need the argouml interfaces, and to run it you need argouml in place. In most cases the argouml interfaces is argouml itself so this distinction is mostly formal. <span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><p class="line874">There are two ways to get the argouml in place w.r.t. your module. The ArgoUML source way and the quicker ArgoUML distribution way. <span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><p class="line874">Using the ArgoUML source way you check out the argouml project alongside the subproject you are going to work with and build it. If you are doing development in the argouml project too, if the subproject in question requires a tool from the argouml project, or if your modules is on the bleeding edge of argouml development and you can't wait for distributions, this is the preferred way. You will need to update and rebuild the argouml project regularly. <span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><p class="line874">Using the ArgoUML distribution way, you check out only your module and then download the ArgoUML distribution and work against that. This is the approach described in the beginning of this section. You will need to download and replace the ArgoUML distribution whenever you need a newer version to work against. You could also, at any point, upgrade to the ArgoUML source way to get to the bleeding edge. <span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><p class="line874">The build.xml ant configuration file in the subproject and the argouml main project are set up to allow for both of these ways. <span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><p class="line867">
<h4 id="head-55b06749bcddd2b8735b0857c7e85c6f036001d4">Working in a subproject</h4>
<span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><p class="line874">Each subproject has its own web site with documentation and plans of the subproject. <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><p class="line874">The subproject has its own commits mailing list that you need to join to monitor the commits. It also has its own dev mailing list where the people working within that subproject discusses the subproject. Join both of these mailing list to see what is going on in the subproject! <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><p class="line874">The sub-projects could use their own Issuezilla database but should preferably instead have issues registered in the ArgoUML Issuezilla. Every developer of a subproject needs to acquire an Observer role in the argouml project. <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><p class="line867">
<h4 id="head-d7dc5ba8c348c9f33a96b72c3a9bcf15fb6528ce">Targets in build.xml in a subproject</h4>
<span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><p class="line874">The following targets have the same documented meaning in all sub-projects: <span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><ul><li>clean (optional) - Removes files that are generated by running any of the other targets. <span class="anchor" id="line-165"></span></li><li>compile (optional) - Compiles the code. The result is in build/classes. <span class="anchor" id="line-166"></span></li><li>generate (optional) - This is a step that, if it exists, can be run before compile. The result of this is some files that are prerequisites for compile so the compile target runs this automatically. <span class="anchor" id="line-167"></span></li><li>install - This builds the whole module and copies it into the ext directory in the argouml installation. <span class="anchor" id="line-168"></span>The purpose of the ext directory is so that argouml can be started with several different modules started at once. <span class="anchor" id="line-169"></span></li><li>jar (optional) - This builds the whole module and puts the resulting jar file(s) in build. <span class="anchor" id="line-170"></span></li><li>run - This starts argouml with this module active. <span class="anchor" id="line-171"></span>This is the way to start this module with the newly compiled source. <span class="anchor" id="line-172"></span></li><li>tests (optional) - This runs all the JUnit test cases available in the module and generates a html report with the result. This probably requires the junit.jar tool from the argouml project. <span class="anchor" id="line-173"></span></li><li>tests-xml (if tests exists) - This runs all the JUnit test cases available in the module. <span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span></li></ul><p class="line867">
<h3 id="head-ac22ecf171e01b95de121417c44197e78805390d">Troubleshooting the development build</h3>
<span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><p class="line867">
<h4 id="head-92630f590bf239d68ede33862c24d0bbb12aa6e7">Compiling failed. Any suggestions?</h4>
<span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><p class="line874">It might be that some other developer has made a mistake in checking in things that contain errors, or forgotten to check in some files in a change. Look at the last couple of hours on the developers mailing list! It is probably on fire. <span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><p class="line874">Another reason for problems is an unclean local source tree. This means that if you have updated different parts of your source tree at different times it might contain inconsistencies. If you suspect this, first try to fix it by doing build clean and svn update before trying to build again. If that doesn't work get it all again from the repository in a new copy. <span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><p class="line862">Another reason might be that you have a <strong>build.properties</strong> or <strong>argouml.build.properties</strong> file that you have been working with earlier and that is doing something. If in doubt, remove those files. <span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><p class="line874">If nothing helps, ask the developers mailing list! <span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><p class="line867">
<h4 id="head-5cad5a7e49d67fd9b0f020835862ab4bbfab23c3">Can't commit my changes?</h4>
<span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><p class="line874">You need to have a developer role in the ArgoUML project or in the subproject you are working with. If you don't, then you cannot do commits yourself. Discuss what you have done and how best to test it on the ArgoUML project developers mailing list or the developers' mailing list for your subproject. Get in contact with the active developers and urge them to commit it for you. <span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><p class="line874">Furthermore the checkout of your copy needs to be done with your Tigris id that has the Developer role. If you for some reason have earlier checked out a copy as guest and then made modifications you may have problems. It is unknown if this is a problem in Subversion. Let the editor know if you find out. <span class="anchor" id="line-192"></span><hr /><p class="line874"> <span class="anchor" id="line-193"></span><a href="CategoryFromCookbook.html">CategoryFromCookbook</a> <span class="anchor" id="line-194"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">Build Process  (last edited 2012-03-13 21:52:00 -0700 by <span title="Linus Tolke @ localhost[127.0.0.1]"><a href="linus.html" title="Linus Tolke @ localhost[127.0.0.1]">linus</a></span>)</p>

