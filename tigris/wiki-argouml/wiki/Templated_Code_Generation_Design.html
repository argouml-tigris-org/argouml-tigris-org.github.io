<h1><small>From the ArgoUML wiki at argouml.tigris.org.</small><br />         Wiki: Templated Code Generation Design
    </h1>
</div>
 
 
 
        
                 
                 
           
    
  

 
 





<div class="wiki">




<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><p class="line867">
<h1 id="head-9fce9da4e5e68c159af56f759d0f245649979433">Introduction</h1>
<span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line874">The purpose of the Code Generation project is to provide users with a means for generating code in an easily customizable fashion. The form that code takes within a company is often standardized, and ArgoUML must be able to support the generation of code that meets a customizable coding standard. <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line867">
<h1 id="head-7ba0ce7d844581d40aa78e61cfc4508ef301eeb0">Use Cases</h1>
<span class="anchor" id="line-9"></span><p class="line867">
<h2 id="head-81ff2ae940f55270251e2913590e25245ace3bc5">Use Case Diagram</h2>
<span class="anchor" id="line-10"></span><p class="line867"><img class="attachment" src="UseCaseDiagram.png" title="attachment:UseCaseDiagram.png" /> <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line867">
<h3 id="head-5e8e2af37ef8bf1327be8e0cb3c96afc580ff6b4">Specify class header</h3>
<span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><ul><li style="list-style-type:none">The user should be able to specify a default header that can be set either as a system default, or on a project-by-project basis.  The template will automatically be injected into the class when it's generated. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span></li></ul><p class="line867">
<h3 id="head-15aff00e5bb3de0d88cb39ac56007dd9070887c4">Clone Template Pack</h3>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><ul><li style="list-style-type:none">The user will be able to clone a template pack to a local or remote directory (i.e. WebDAV, S/FTP server, etc).  The template pack is a zip file containing all of the templates and any associated metadata. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></li></ul><p class="line867">
<h3 id="head-9088bc332aa24adc60480604b124e8baaa21b54b">Share Template</h3>
<span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><ul><li style="list-style-type:none">The form that code takes is often standardized within a company according to its coding standards.  The user will be able to share their templates, and use a standardized templates found in a template repository.  <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span></li></ul><p class="line867">
<h4 id="head-907dfba43539eadcbd8efe9606b4c8c6d1fb79a3">Specify Template Repository</h4>
<span class="anchor" id="line-29"></span><ul><li style="list-style-type:none">The user will be able to specify a template repository.  This may be a remote repository such as a WebDAV, or FTP server.  The system will automatically scan the directory for templates prior to code generation. <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span></li></ul><p class="line867">
<h3 id="head-e8afaf29d7e45db4f0f960041bde73c8887c14e2">Modify Templates in Template Pack</h3>
<span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><ul><li style="list-style-type:none">The user should be able to modify any template in a template pack.  The system should have a built-in editor to allow the user to edit the contents of the template in addition to the template metadata. <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span></li></ul><p class="line867">
<h4 id="head-4c033b44ec8e6512acd3f60617c33f31cd1d681d">Modify Template</h4>
<span class="anchor" id="line-37"></span><ul><li style="list-style-type:none">The user will be able to modify the text of the code template itself via a built-in editor. <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span></li></ul><p class="line867">
<h4 id="head-3fc124fff1313d0fdafb2269e03ec25efe5c4715">Modify Template Metadata</h4>
<span class="anchor" id="line-40"></span><ul><li style="list-style-type:none">The user will be able to edit template metadata.  This metadata may include a filenaming convention specified as a template (for example "${projectRoot}/src/main/java/${package}/${classname}.java") <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></li></ul><p class="line867">
<h4 id="head-ecbbda3c717d5751ac27ef5c677659cd08f68745">Modify Template Pack Metadata</h4>
<span class="anchor" id="line-43"></span><ul><li style="list-style-type:none">The user will be able to modify the Template Pack's metadata. These parameters will include any stereotype-dependent directory locations.  This will allow the user who is generating Grails or Spring projects (for example) to generate classes and artifacts in specific directories. <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span></li></ul><p class="line867">
<h3 id="head-dd9384b965caa4a97d32f415096f0631b6d7e0cb">Generate Code</h3>
<span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><ul><li style="list-style-type:none">The user should be able to generate code. The user will be able to select a template pack and any subset of classes, and generate code from their selections. <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span></li></ul><p class="line867">
<h4 id="head-65b885a7ff32bf08403557f9781d950f57d5674f">Generate Code For Diagram</h4>
<span class="anchor" id="line-52"></span><ul><li style="list-style-type:none">The user should be able to generate code for all classes in a given diagram.  It may be useful at some point in the future to be able to generate configuration files (like Maven POM files, and Manifest files) from a deployment diagram. <span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span></li></ul><p class="line867">
<h4 id="head-88a52df8d817f401b93fa8e10281873cdcec143b">Generate Code For Package</h4>
<span class="anchor" id="line-55"></span><ul><li style="list-style-type:none">The user will be able to generate code for a particular package. <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span></li></ul><p class="line867">
<h4 id="head-3667e0f7a1f9bad16e3b78d498b0e61c424fd9df">Generate Code For Project</h4>
<span class="anchor" id="line-58"></span><ul><li style="list-style-type:none">The user should be able to generate code for all classes in the project.  <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span></li></ul><p class="line867">
<h3 id="head-f59b195fc32eaab87e21b271cc210009fb8e8e1d">Generate Language-Specific Elements</h3>
<span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><p class="line867">
<h3 id="head-dffb560d1bc237a10c82427a9c061b97fce38bff">Generate Test Cases:</h3>
<span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><ul><li style="list-style-type:none">The user will be able to generate test cases for any subset of the project specified in the Generate Code use case. <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span></li></ul><p class="line867">
<h1 id="head-d58ba356c267077f1cd5de430e59d5bd20399a74">Classes</h1>
<span class="anchor" id="line-72"></span><p class="line867">
<h2 id="head-2af86a134761bf6e07290976c2c4d367d11039ca">Class Diagram</h2>
<span class="anchor" id="line-73"></span><p class="line867"><img class="attachment" src="ClassDiagram.png" title="attachment:ClassDiagram.png" /> <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><p class="line867">
<h3 id="head-7b280ad066bdfdcb7df2db210a50412baa3a55f0">ProjectGenerator</h3>
<span class="anchor" id="line-77"></span><ul><li style="list-style-type:none">Implementations of this class are responsible for generating a project directory structure <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span></li></ul><div><table><tbody><tr>  <td colspan="2"><p class="line862"> <strong>Methods</strong> </td>
</tr>
<tr>  <td><span class="anchor" id="line-80"></span><p class="line891"><strong>Name</strong></td>
  <td><p class="line891"><strong>Description</strong></td>
</tr>
<tr>  <td><span class="anchor" id="line-81"></span><p class="line862">generateProject</td>
  <td><p class="line862">This method creates the directory structure of the project</td>
</tr>
<tr>  <td><span class="anchor" id="line-82"></span><p class="line862">addDirectoryTemplate</td>
  <td><p class="line862">This method adds a directory template for the project.  The directory template is used to create a directory within the project.  </td>
</tr>
</tbody></table></div><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><p class="line867">
<h3 id="head-efbe8d5fac656c6dbd1dd9fbd0f69626b79b0184">CodeGenerator</h3>
<span class="anchor" id="line-86"></span><ul><li style="list-style-type:none">This interface defines the methods needed to generate code using a template. <span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span></li></ul><div><table><tbody><tr>  <td colspan="2"><p class="line891"><strong>Methods</strong></td>
</tr>
<tr>  <td><span class="anchor" id="line-90"></span><p class="line891"><strong>Name</strong></td>
  <td><p class="line891"><strong>Description</strong></td>
</tr>
<tr>  <td><span class="anchor" id="line-91"></span><p class="line862">generate</td>
  <td><p class="line862">This method generates classes or other artifacts from a diagram. </td>
</tr>
<tr>  <td><span class="anchor" id="line-92"></span><p class="line862">getName</td>
  <td><p class="line862">Gets the name of the code generator.  </td>
</tr>
</tbody></table></div><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><p class="line867">
<h3 id="head-3af9364153859b74afbe732f5da208fd9c82737a">CodeGeneratorMetaFile</h3>
<span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><ul><li style="list-style-type:none">This class stores the metadata associated with a code generator. <span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span></li></ul><div><table><tbody><tr>  <td><p class="line891"><strong>Methods</strong></td>
</tr>
<tr>  <td><span class="anchor" id="line-102"></span><p class="line891"><strong>Name</strong></td>
  <td><p class="line891"><strong>Description</strong></td>
</tr>
<tr>  <td><span class="anchor" id="line-103"></span><p class="line862">getFileNamingTemplate</td>
  <td><p class="line862">This method gets a file naming template used to create files.</td>
</tr>
</tbody></table></div><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><p class="line867">
<h3 id="head-51bd7e9b7e428d60359031ea1216d7af14af4be1">VelocityClassGenerator</h3>
<span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><ul><li style="list-style-type:none">This class uses Velocity templates to generate classes. <span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></li></ul><p class="line867">
<h3 id="head-e6818c51a85df5d3e67e5ada98ee42e404c0f88d">CodeGenerationUtil</h3>
<span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><ul><li style="list-style-type:none"><p class="line862">This class is similar to the DiagramUtil class in ArgoPrint and serves as a shim between the model and the template.  It's purpose is to make it easier for template writers to access model elements in the class with simple one-line calls. <span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span></li></ul><div><table><tbody><tr>  <td><p class="line891"><strong>Methods</strong></td>
</tr>
<tr>  <td><span class="anchor" id="line-118"></span><p class="line891"><strong>Name</strong></td>
  <td><p class="line891"><strong>Description</strong></td>
</tr>
<tr>  <td><span class="anchor" id="line-119"></span><p class="line862">getClassesForDiagram</td>
  <td><p class="line862">This method gets the classes for an individual diagram.</td>
</tr>
<tr>  <td><span class="anchor" id="line-120"></span><p class="line862">getAnnotationsForClass</td>
  <td><p class="line862">This method gets the annotation names for a class.  This is useful if you have class-level annotations that you want to apply.</td>
</tr>
<tr>  <td><span class="anchor" id="line-121"></span><p class="line862">overrides</td>
  <td><p class="line862">This method indicates whether or not the method in a given class overrides the method from a superclass.  This is used primarily to determine whether or not to generate an @Overrides annotation in Java.</td>
</tr>
<tr>  <td><span class="anchor" id="line-122"></span><p class="line862">getAnnotationImportsForClass</td>
  <td><p class="line862">This method gets the fully qualified import statements for the annotations used in the class.</td>
</tr>
<tr>  <td><span class="anchor" id="line-123"></span><p class="line862">getNestedClasses</td>
  <td><p class="line862">This method gets the nested classes (inner classes) for a given parent class.</td>
</tr>
<tr>  <td><span class="anchor" id="line-124"></span><p class="line862">getClassesForPackage</td>
  <td><p class="line862">This metho gets the class for a package.</td>
</tr>
<tr>  <td><span class="anchor" id="line-125"></span><p class="line862">getClassesForProject</td>
  <td><p class="line862">This method gets all classes found in a particular project.</td>
</tr>
<tr>  <td><span class="anchor" id="line-126"></span><p class="line862">getAnnotationsForMethods</td>
  <td><p class="line862">This method gets the annotations for a given method</td>
</tr>
</tbody></table></div><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><p class="line867">
<h3 id="head-85d1e7f5ad5fe06dabcc9546b4740218df4a2ba0">CodeGeneratorFactory</h3>
<span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><ul><li style="list-style-type:none">This factory is responsible for creating instances of a code generator.  It uses the Java SPI facility to register code generator implementations. <span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span></li></ul><p class="line867">
<h3 id="head-db422c041cbf4714f33ccaa2fbb79bffce148bde">TemplatePackMetaFile</h3>
<span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><ul><li style="list-style-type:none">This class is used to manage the metadata associated wth a template pack.  The pack is a zip file containing multiple templates.   <span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span></li></ul><p class="line867">
<h3 id="head-b7a90a96c323a8532dd2d2307a67cac3fefe858c">CodeGeneratorSerializer</h3>
<span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><ul><li style="list-style-type:none">This class is responsible for reading/writing Code Generator Metadata Files.  These metadata files contain configuration information used to generate code from templates. <span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span></li></ul><p class="line867">
<h3 id="head-ed01514d2ed3de52a4f11a30793f76051d35557f">TemplatePackSerializer</h3>
<span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><ul><li style="list-style-type:none">This class is responsible for reading/writing a template pack.  Template packs are zip files which contain the metadata and associated template files. <span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span></li></ul><p class="line867">
<h3 id="head-9b851409e6cc6d8213dc7238b4d371ca6aa7e279">DefaultProjectGenerator</h3>
<span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><ul><li style="list-style-type:none">This class is the default implementation of the project generator. <span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span></li></ul><p class="line867">
<h3 id="head-e02d899af162b186c64ffb067a6568dbf91ec407">ProjectGeneratorFactory</h3>
<span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><ul><li style="list-style-type:none">This factory generates projects including directory structures. <span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span></li></ul><p class="line867">
<h3 id="head-17c95a35d50b5e47dbb8ca6b52e63ed56773a07a">CodeGenManager</h3>
<span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><ul><li style="list-style-type:none">This is the central class of the framework and is responsible for managing all aspects of code generation. <span class="anchor" id="line-168"></span></li></ul><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-169"></span><a href="CategoryFurtherDevelopment.html">CategoryFurtherDevelopment</a> <span class="anchor" id="line-170"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">Templated Code Generation Design  (last edited 2011-09-05 20:33:08 -0700 by <span title="Mark Fortner @ localhost[127.0.0.1]">phidias</span>)</p>

