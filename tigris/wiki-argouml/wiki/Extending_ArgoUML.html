---
layout: oldtigrissite
---
<h1><small>From the ArgoUML wiki at argouml.tigris.org.</small><br />         Wiki: Extending ArgoUML
    </h1>
</div>
 
 
 
        
                 
                 
           
    
  

 
 





<div class="wiki">




<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line874">This section explains some general concepts which come in handy, when developing additions to ArgoUML. <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
<h2 id="head-3c2e326329599304be1e94d3b1e565ca0e42c813">How do I ...?</h2>
<span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line862">...get the corresponding UML element for a given <tt>Fig''XXX''</tt> object? <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line862">Each <tt>Fig''XXX''</tt> implements the method <tt>getOwner()</tt> which returns the appropriate owner element which is responsible for this <tt>Fig</tt> element. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line862">...get the corresponding <tt>Fig</tt> element for a given <tt>ModelElement</tt>? <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line862">for this one needs to iterate through all <tt>Fig</tt> objects and invoke <tt>getOwner</tt>. Compare the result with the given <tt>ModelElement</tt>. Be aware that there might be more than one <tt>Fig</tt> object for a given <tt>ModelElement</tt> if it appears in multiple diagrams or there may be none if it has no diagrams. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line867">
<h2 id="head-bb58db08c0ef215dbe7ded444a2a1f9f5a7fb940">Modules</h2>
<span class="anchor" id="line-17"></span><p class="line874">The ArgoUML tool provides a basis for UML design and potentially an executable architecture environment for more specialized applications. This is solved by a clear interfaces between the ArgoUML core and the extensions. Extensions are called modules. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line867">
<h3 id="head-bb58db08c0ef215dbe7ded444a2a1f9f5a7fb940-2">Modules</h3>
<span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line874">Modules <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line874">A module is a collection of classes and resource files that can be enabled and disabled in ArgoUML. Currently this is decided by the module's availability when ArgoUML starts but in the future it could be made possible to enable modules from within a running ArgoUML. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line874">This module system is the extension capability to the ArgoUML tool. It gives developers of ArgoUML and developers of applications running within the ArgoUML architecture the ability to add functionality to the ArgoUML environment without modifying the basic ArgoUML tool. This flexibility is designed to encourage additional open source and/or commercial involvement with the open source UML tool. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line874">The module extensions load when ArgoUML starts. When the modules are loaded they have the capability of attaching to internal ArgoUML architectural elements. Once the plugins are attached, the plugins will receive calls at the right moment and can perform the correct action at that point. <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line862">Modules can be internal and external. The only difference is that the internal modules are part of the <strong>argouml.jar</strong> and the external are delivered as separate jar-files. <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line862">This is essentially and implementation of the Dynamic Linkage pattern as described in Patterns in Java Volume 1 by Mark Grand ISBN 0-471-25839-3. The whole of ArgoUML Core is the Environment, the classes inheriting <tt>Pluggable</tt> are the <tt>AbstractLoadableClass</tt>. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line867">
<h3 id="head-bb58db08c0ef215dbe7ded444a2a1f9f5a7fb940-3">Modules</h3>
<span class="anchor" id="line-35"></span><p class="line867">
<h4 id="head-734bef6b13ebbbdc02ec0be0dff54df31c3acaed">Module Architecture</h4>
<span class="anchor" id="line-36"></span><p class="line862">The controlling class for the implementation is <tt>org.argouml.moduleloader.ModuleLoader2</tt>. It is a singleton created when first used. It is first used in the main initialization routine. <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line862">When created it searches through all available modules and creates a list of their main objects (implementing <tt>ModuleInterface</tt>). Currently (September 2004) this also means that the found modules are by default selected i.e. they are marked to be enabled. <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><p class="line862">At the end of the main initialization routine the selected modules are enabled. (The original idea was to do this several times during the main routine to allow for modules to add command line arguments, add languages, and make functions available for batch command, but the example used for testing loaded the ProjectBrowser "too early" and the result wasn't so good. I (Linus) hope this can be eventually fixed.) <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line867">
<h4 id="head-a6711438db0d1f36c3277c032c5557d0ce648446">The ModuleInterface interface</h4>
<span class="anchor" id="line-43"></span><p class="line862">Each class used by the <tt>ModuleLoader2</tt> must implement the <tt>ModuleInterface</tt> interface. <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><p class="line874">This interface has methods for enabling, disabling and identifying the module. <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><p class="line874">When a module is enabled it is expected to register some class wherever it affects ArgoUML using the interfaces provided there. Since the same interfaces and registration mechanism is used internally within ArgoUML there is a small likelyhood that there already is an interface and a possibility to register. If there isn't, ArgoUML cannot currently be extended at that point. If you still need ArgoUML to be extended at that point you will have to work in getting this interface or registration mechanism implemented within ArgoUML. (This could also be another module that has to be amended.) <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><p class="line874">Classes administered by the module that registers to whatever place of ArgoUML they are interested in, does not need to have any connection to the module loader. They are written exactly as if they would have been if they were part of the core ArgoUML. <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><p class="line867">
<h4 id="head-9c2e29ff80313e09b14541a416c31b7621a88be7">Using Modules</h4>
<span class="anchor" id="line-52"></span><p class="line874">When modules are used they can't be distinguished from the rest of the ArgoUML environment. <span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><p class="line867">
<h4 id="head-3c2e326329599304be1e94d3b1e565ca0e42c813-2">How do I ...?</h4>
<span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><p class="line874">...tell when a module is enabled? <span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><p class="line862">The method <tt>isEnabled</tt> in <tt>ModuleLoader2</tt> returns <tt>true</tt> if the module with that name is enabled and <tt>false</tt> otherwise. <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><p class="line867">
<h3 id="head-2944174ca743b7db83a95f5700392b0b6a17f9a2">Tip for creating new modules (from Florent de Lamotte)</h3>
<span class="anchor" id="line-62"></span><p class="line867"><img alt="/!\" height="15" src="../branding/css/wiki/cee/img/alert.png" title="/!\" width="15" /> <a href="CategoryFix.html">CategoryFix</a>: This description is for the old moduleloader. <span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><p class="line874">Florent wrote a small tutorial for creating modules. It can be found on the ArgoPNO website. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><p class="line867">
<h2 id="head-083418b05ff0bb191df0a436914d472691ad314b">How are modules organized in the Java code?</h2>
<span class="anchor" id="line-71"></span><p class="line874">The previous section describes how modules and plug-ins are organized at the Java level independent of how they are actually packaged. <span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><p class="line874">Within the ArgoUML project some parts of the code are developed and packaged separately from the main ArgoUML source code. This section describes how they are organized and how you create such source-code modules. <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><p class="line867">
<h3 id="head-ad3839d7de2b11dd7905ff0539ede768555a8bb7">Requirements on modules</h3>
<span class="anchor" id="line-76"></span><p class="line874">An external module requires: <span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><p class="line862">The module main class implements <tt>org.argouml.moduleloader.ModuleInterface</tt> <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><p class="line862">Archive the main class into a jar, with an entry "Name" in <strong>MANIFEST.MF</strong> specifying the name of the main class. For example, Name: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><p class="line867"><span class="anchor" id="line-83"></span><pre>Name: your/own/domain/your/package/your.class
<span class="anchor" id="line-84"></span></pre><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><p class="line862">The class in question must implement <tt>org.argouml.moduleloader.ModuleInterface</tt>. <span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><p class="line862">Put the jar file into a directory called <strong>ext</strong> under the home directory of ArgoUML <span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><p class="line862">Run ArgoUML and check if the module appears in Edit -&gt; Settings -&gt; Modules <span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><p class="line862">New modules that are added to ArgoUML shall reside in whole new packages. Either you put your module classes in <tt>your.own.domain&nbsp;.your.package.name</tt> or if you want to emphasize the connection to ArgoUML you can use <tt>org.argouml.your.package.name</tt> where <tt>your.package.name</tt> is the name of your addition. <span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><p class="line867">
<h3 id="head-3c2e326329599304be1e94d3b1e565ca0e42c813-3">How do I ...?</h3>
<span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><p class="line874">...create a new source-code module. <span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><p class="line874">Suggestion, copy from the menutest module as described here. <span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><p class="line862">Make a copy of <strong>argouml/modules/menutest</strong> into <strong>argouml/modules/your</strong> name. <span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><p class="line862">Add any jar you need to <strong>argouml/modules/your name /lib</strong> and add references to each of the jars in <strong>argouml/modules/your name/build.xml</strong>. <span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><p class="line862">Edit <strong>argouml/modules/your name /module.properties</strong> <span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><p class="line862">Edit <strong>argouml/modules/your name/src/org/manifest.mf</strong>. <span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><p class="line874">Reorganize the source files as necessary. Remove the directory argouml/modules/your name /src/org/argouml/ui and create your own classes like org.argouml.your package name in argouml/modules/your name /src/org/argouml/your package name. <span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><p class="line874">...get Argo to use a plug-in? <span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><p class="line867"><img alt="/!\" height="15" src="../branding/css/wiki/cee/img/alert.png" title="/!\" width="15" /> <a href="CategoryFix.html">CategoryFix</a>: This description is for the old module loader. <span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><p class="line874">Once you've created a jar file with a plug-in in it, you need to make sure that Argo can find the jar to be able to execute it. <span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><p class="line874">If you are using a "standard" ArgoUML source structure, then you should be able to execute build install or ant install in the source directory of the plug-in. This will copy the jar file to the proper directory in the main ArgoUML build target. You can test your plug-in by running build run in the src_new directory. <span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><p class="line874">If you need to install the jar "the hard way", try the following steps. <span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><p class="line874">Start up ArgoUML. <span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><p class="line862">Go to the menu Edit-&gt;Settings and look at the Environment tab. Find the entry labeled ${argo.ext.dir}. Create that directory if it does not already exist. <span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><p class="line874">Copy the plug-in jar and any other jars required by it into that directory. <span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><p class="line874">Start up ArgoUML again, and you should see the plug-in's startup banner (if it has one, of course). <span class="anchor" id="line-129"></span><hr /><p class="line874"> <span class="anchor" id="line-130"></span><a href="CategoryFromCookbook.html">CategoryFromCookbook</a> <span class="anchor" id="line-131"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">Extending ArgoUML  (last edited 2009-02-08 09:18:51 -0700 by <span title="Linus Tolke @ localhost[127.0.0.1]"><a href="linus.html" title="Linus Tolke @ localhost[127.0.0.1]">linus</a></span>)</p>

