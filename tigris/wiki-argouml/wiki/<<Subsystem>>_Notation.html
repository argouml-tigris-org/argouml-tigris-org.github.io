---
layout: oldtigrissite
---
<h1><small>From the ArgoUML wiki at argouml.tigris.org.</small><br />         Wiki: &lt;&lt;Subsystem&gt;&gt; Notation
    </h1>
</div>
 
 
 
        
                 
                 
           
    
  

 
 





<div class="wiki">




<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><dl><dt>Purpose</dt><dd>To handle generating, updating and editing in different languages of a textual representation which represents one or more UML modelelements. Such a notation element gets e.g. attached to a diagram figure or an explorer entry. <span class="anchor" id="line-2"></span></dd><dt>Located</dt><dd><p class="line891"><strong>org.argouml.notation</strong> and its sub-folders <span class="anchor" id="line-3"></span></dd><dt>Layer</dt><dd><p class="line891"><a href="&lt;&lt;Layer&gt;&gt;_View_and_Control_subsystems.html">&lt;&lt;Layer&gt;&gt; View and Control subsystems</a> <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span></dd></dl><p class="line867"><strong>Figure: Notation subsystem part 1.</strong> <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line867"><img src="notation1.png" title="notation1.png" /> <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><p class="line874">In the scope of issue 3140, the notation architecture has been discussed. Later, a change has been performed to resolve dependency cycles. <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><p class="line862">We decide that we support other languages than UML to show in diagrams, but this shall be a user-choice with project scope - and we will never refine the scope to something more detailed. Hence we need not store the notation language per <tt>Fig</tt>. So, this means that you can set the notation language in the project properties, and in the application-wide defaults. <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line862">The abstract class <tt>NotationProvider</tt> is at the center of the subsystem. There is an object extending the <tt>NotationProvider</tt> class per string (i.e. textual model representation) that is shown on the diagram: e.g. <tt>TransitionNotation</tt>, <tt>StateBodyNotation</tt>, <tt>ModelElementNameNotation</tt>. A state will show the latter 2. <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line862">This notation object would keep track of which UML objects it represents, generate and parse and provide a help text. Since the changes done for issue 6129, it also keeps track of its renderer, i.e. the <tt>Fig</tt> that implements the <tt>NotationRenderer</tt> interface, so that it can deliver an updated text when the model changes. <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line862">The <tt>Fig</tt> refreshes the text by calling the <tt>toString()</tt> method of the <tt>Notationprovider</tt>, at initialization time and whenever the notation changes (e.g. the notation language can change from UML to Java).  <span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line862">In case the model changes, the initiative for a rendering change lays with the <tt>NotationProvider</tt>. This works as follows: The notation object defines the set of model change events that it listens at. Putting this task into this Notation class (instead of the <tt>Fig</tt>) has the advantage that the knowledge to which UML objects to listen is centralized where it is needed, and not in the <tt>Fig</tt>. When the model changes, the <tt>Fig</tt> receives a call to its <tt>NotationRenderer.notationRenderingChanged</tt> function, and the <tt>Fig</tt> refreshes the rendering of its string. Additionally, the <tt>Notationprovider</tt> updates the set of model change listeners if needed. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><p class="line867"><strong>Figure: Notation subsystem part 2.</strong> <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><p class="line867"><img src="notation2.png" title="notation2.png" /> <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><p class="line862">The <tt>NotationProvider</tt> objects <tt>TransitionNotation</tt>, <tt>StateBodyNotation</tt>, etc. are abstract, since they are specialised in classes that implement them for a certain language, i.e. one per language. So, we will have: <tt>TransitionNotationUML</tt>, <tt>TransitionNotationJava</tt>, ... etc. <span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line862">The <tt>NotationProviderFactory2</tt> is a singleton, since it is the accesspoint for all <tt>Fig</tt>s to create the textual representation of modelobjects, and since plugin modules can add extra languages. Once/if ArgoUML would support multiple projects, then we would need one <tt>NotationProviderFactory2</tt> per project, since its language may differ per project. <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line862">The <tt>NotationProviderFactory2</tt> creates a notation object on request for any <tt>Fig</tt>, based on the current notation language selected by the user for the current project. Hence, when the user changes the language (in the menu), then it is the <tt>Fig</tt>'s responsibility to listen to the <tt>NotationEvent</tt> (hence the <tt>Fig</tt> shall implement <tt>ArgoNotationEventListener</tt>), and ask the <tt>NotationProviderFactory2</tt> to create a new <tt>NotationProvider</tt> child. <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line867"><strong>Figure: Notation subsystem part 3.</strong> <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line867"><img src="notation3.png" title="notation3.png" /></a> <span class="anchor" id="line-35"></span><hr /><p class="line874"> <span class="anchor" id="line-36"></span><a href="CategoryFromCookbook.html">CategoryFromCookbook</a> <span class="anchor" id="line-37"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">&lt;&lt;Subsystem&gt;&gt; Notation  (last edited 2010-11-20 20:13:23 -0700 by <span title="Michiel van der Wulp @ localhost[127.0.0.1]"><a href="mvw.html" title="Michiel van der Wulp @ localhost[127.0.0.1]">mvw</a></span>)</p>

